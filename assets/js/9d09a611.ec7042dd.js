"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[258],{2602:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"architecture/agent","title":"drasyl Agent","description":"The agent that brings your device into the drasyl network","source":"@site/docs/architecture/agent.mdx","sourceDirName":"architecture","slug":"/architecture/agent","permalink":"/architecture/agent","draft":false,"unlisted":false,"editUrl":"https://github.com/drasyl/docs.drasyl.org/blob/master/docs/architecture/agent.mdx","tags":[],"version":"current","lastUpdatedAt":1757959249000,"frontMatter":{"title":"drasyl Agent","description":"The agent that brings your device into the drasyl network"},"sidebar":"tutorialSidebar","previous":{"title":"Network Management","permalink":"/architecture/network-management"},"next":{"title":"Self-Hosting","permalink":"/self-hosting"}}');var i=n(4848),r=n(8453);const o={title:"drasyl Agent",description:"The agent that brings your device into the drasyl network"},a="drasyl Agent",c={},l=[{value:"Responsibilities",id:"responsibilities",level:2}];function d(e){const t={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"drasyl-agent",children:"drasyl Agent"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"drasyl agent"})," is a persistent local service that ensures your device remains connected to all drasyl overlay networks it has been added to."]}),"\n",(0,i.jsx)(t.h2,{id:"responsibilities",children:"Responsibilities"}),"\n",(0,i.jsx)(t.p,{children:"The agent autonomously handle all tasks required for participating:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Identity Management"}),(0,i.jsx)(t.br,{}),"\n","On first startup, the agent generates a cryptographic key pair. This process includes a CPU-hard proof of work, which may take some time to complete. The resulting public key serves as the node's identity within the network. The private key is stored locally and never leaves the device."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Configuration Fetching"}),(0,i.jsx)(t.br,{}),"\n","Periodically retrieves and parses network configurations from the specified source (e.g., local file or HTTP endpoint). If the source is temporarily unavailable or the configuration is invalid, the agent continues operating using the last known valid configuration and retries the fetch operation periodically."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Network Reconciliation"}),(0,i.jsx)(t.br,{}),"\n","Continuously compares the desired state defined in the configuration with the actual system state. When differences are detected, it applies the necessary changes to bring the system into compliance. The reconciler aims to maintain drasyl network connectivity at all times. However, in some cases (e.g., due to overlay IP or subnet changes), a brief interruption in drasyl network access may occur. If the reconciler fails to reach the desired state, it will continue retrying until successful."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Virtual Network Interface Provisioning"}),(0,i.jsx)(t.br,{}),"\n","Manages the creation and lifecycle of virtual network interfaces used to connect the system to drasyl overlay networks. These interfaces (implemented as ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/TUN/TAP",children:"TUN devices"}),") expose regular IP connectivity to local applications, while all traffic is transparently routed through the agent and processed according to the overlay configuration."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Routing Coordination"}),(0,i.jsx)(t.br,{}),"\n","Installs system-level routing rules to direct specific traffic to physical IP subnets via the drasyl network. This allows access to remote physical networks that are otherwise unreachable, by having drasyl nodes act as gateways and share access to their local networks with other nodes in the overlay."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"DNS Management"}),(0,i.jsx)(t.br,{}),"\n","Modifies the system's DNS settings to enable name-based communication with other overlay nodes (e.g., ",(0,i.jsx)(t.code,{children:"<node>.drasyl.network"}),")."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Access Enforcement"}),(0,i.jsx)(t.br,{}),"\n","All traffic passing through the virtual network interface is subject to strict access control.\nFor ",(0,i.jsx)(t.strong,{children:"outgoing traffic"}),", the agent checks whether the destination IP is permitted by the configured egress policies.\nFor ",(0,i.jsx)(t.strong,{children:"incoming traffic"}),", it verifies that each packet is cryptographically authenticated, the claimed overlay IP address matches the sender's public key, and the communication is permitted by the ingress policy.\nThis prevents overlay IP spoofing and ensures that only authorized identities can send or receive traffic.\nAccess control follows ",(0,i.jsx)(t.strong,{children:"Zero Trust principles"}),": every packet is verified individually, and no communication is allowed without explicit authorization."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"P2P Connectivity"}),(0,i.jsx)(t.br,{}),"\n","Coordinates the setup and maintenance of encrypted tunnels between peers. Direct connections are established when possible. If that fails, the agent falls back to relayed communication via super peers or TCP encapsulation over port 443. Connection attempts are retried continuously as long as communication is required."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var s=n(6540);const i={},r=s.createContext(i);function o(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);